<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="daily journal">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/style.css">
        <title>Daily Journal</title>
    </head>
    <body>
        
        <nav class="nav" name="nav">
            <div class="container">
                <h1 class="logo"><a href="/index.ejs">Daily Journal</a></h1>
                <ul>
                    <li><a href="#" class="current">Home</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">To Do</a></li>
                    <li><a href="#">Notes</a></li>
                    <li><a href="#">About</a></li>
                    <button class="signIn" id="signIn">Sign In</button>
                </ul>
            </div>
        </nav>
    <!--------------------- MODAL ------------------------------------------>
    <div class="modal" id="myModal">

        <!--------------- FORM MODAL CONTENT ----------------->
        <div class="form-container">
        <form class="modal-content animate" action="#contact" method="post">
            
                <div class="contact-form-header">
                    <h3 class="contact-me-form-title">Contact Me</h3>

                    <div class="close-btn-container">
                        <button class="close-btn" id="close">Close</button>
                    </div>
                </div>

            <div class="form-control">
                <input type="text" id="name" name="name" placeholder="Name">
                <br>
                <small>Error message</small>
            </div>

            <div class="form-control">
                <input type="text" id="name" name="surname" placeholder="Surname">
                <br>
                <small>Error message</small>
            </div>

            <div class="form-control">
                <input type="text" id="email" name="email" placeholder="Email">
                <br>
                <small>Error message</small>
            </div>

            <div class="btn-container">
                <button class="btn" type="submit" name="login">Login</button>
            </div>
            <div class="text">
                <p>Don't have an account? <a href="/">Register</a> </p>
            </div>
        </form>
        </div>
    <!-----------END OF FORM MODAL ----------------------------------------->
    </div>
    <!-------------- END OF MODAL ------------------------------------------>
        <div class="hero">
            <div class="container">
                <h1>Welcome</h1>
                <p>This is my little dairy. Enjoy!</p>
                
            </div>
        </div>

        <section class="container content">
            <h2>content one</h2>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Inventore deserunt corporis voluptas beatae ipsam excepturi dolorem perspiciatis dolore adipisci id? Lorem ipsum dolor sit, amet consectetur adipisicing elit. Enim qui nisi tenetur accusantium ducimus veritatis excepturi. Nemo fugiat quidem sequi.</p>

            <h2>content two</h2>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Odio impedit quidem ex deleniti autem expedita, itaque animi dignissimos a aut accusamus sunt minima ullam alias, voluptatum asperiores fuga explicabo porro! Lorem ipsum dolor sit, amet consectetur adipisicing elit. Illo magnam, impedit cupiditate id consequatur ratione aperiam deserunt vitae! Quidem, quo. Error velit ea, molestias natus veniam tempore! Laboriosam, ipsam fuga.</p>

            <h2>content three</h2>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Inventore deserunt corporis voluptas beatae ipsam excepturi dolorem perspiciatis dolore adipisci id? Lorem ipsum dolor sit, amet consectetur adipisicing elit. Enim qui nisi tenetur accusantium ducimus veritatis excepturi. Nemo fugiat quidem sequi.</p>

            <h2>content four</h2>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Odio impedit quidem ex deleniti autem expedita, itaque animi dignissimos a aut accusamus sunt minima ullam alias, voluptatum asperiores fuga explicabo porro! Lorem ipsum dolor sit, amet consectetur adipisicing elit. Illo magnam, impedit cupiditate id consequatur ratione aperiam deserunt vitae! Quidem, quo. Error velit ea, molestias natus veniam tempore! Laboriosam, ipsam fuga.</p>
        </section>
        <div class="foot">
            <div class="end-box">
                <div class="box">
                    <img src="img/poppy.jpg" alt="poppy">
                    <p>
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Suscipit, cum?
                    </p>
                </div>
                <div class="box">Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempore, similique!</div>
            </div>

            <footer>Copyright &amp; 2021 designed by NoName</footer>
        </div>


<script>
    let modal = document.getElementById('myModal');

    // Get the button that open the modal
    let signIn = document.querySelector('.signIn');

    //Get the element that closes the modal
    let close = document.getElementById('close');

    //When the user clicks on the button, open the modal
    signIn.onclick = function () {
        modal.style.display = 'block';
    }

     //when user clicks on "close", close the modal   
    // NOT WORKING!!!!
    close.onclick = function () {
        modal.style.display = 'none';
    }

    //When the user clicks anywhere outside the modal, close it
    window.onclick = function (event) {
        if (event.target == modal) {
        modal.style.display = 'none';
        }
    }
    //////////////////////////////
    const form = document.getElementById('modal-content');
    const name = document.getElementById('name');
    const email = document.getElementById('email');


    // Input error message
    function showError(input, message) {
        const formControl = input.parentElement;
        formControl.className = 'form-control error';
        const small = formControl.querySelector('small');
        small.innerText = message;
    }

    // Input success message
    function showSuccess(input) {
        const formControl = input.parentElement;
        formControl.className = 'form-control success';
    }

    // Check email is valid
    function checkEmail(input) {
        const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        if(re.test(input.value.trim())) {
            showSuccess(input);
        } else {
            showError(input, 'Email is not valid');
        }
    }

    // Check required fields
    function checkRequired(inputArr) {
        inputArr.forEach(function(input) {
            if(input.value.trim() === '') {
                showError(input, `${getFieldName(input)} is required`);
            } else {
                showSuccess(input);
            }
        });
    }

    // Check input length
    function checkLength(input, min, max) {
        if(input.value.length < min) {
            showError(input, `${getFieldName(input)} mast be at least ${min} characters`);
        } else if(input.value.length > max) {
                showError(input, `${getFieldName(input)} must be less than ${max} characters`);
            
        } else {
            showSuccess(input);
        }
    }

    function getFieldName(input) {
        return input.id.charAt(0).toUpperCase() + input.id.slice(1);
    }

    // Check passwords match
    function passwordsMatch(input1, input2) {
        if(input1.value !== input2.value) {
            showError(input2, 'Passwords do not match'); //show the error on input2
        }
    }

    // Event listeners
    form.addEventListener('submit', function(e) {
        e.preventDefault();

        checkRequired([username, email, password, password2]);
        checkLength(username, 3, 15);
        checkLength(password, 6, 25);
        checkEmail(email);
        passwordsMatch(password, password2);
    })

</script>
</body>
</html>